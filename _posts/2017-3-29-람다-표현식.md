---
layout: post
title: 람다 표현식
category: java8
tags: [java8]
---
### 람다 표현식 ###
**람다란 무엇인가?**
- 익명
- 함수
- 전달
- 간결성

```JAVA
// 구코드
Comparator<Apple> byWeight = new Comparator<Apple>(){
  public int compare(Apple a1, Apple a2){
    return a1.getWeight().compareTo(a2.getWeight());
  }
};

// 람다
Comparator<Apple> byWeight = (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());
```
**람다 구성**
- 파라미터 리스트
```JAVA
(Apple a1, Apple a2)
```
- 화살표
```JAVA
->
```
- 람다의 바디
```JAVA
a1.getWeight().compareTo(a2.getWeight());
```

**유효한 람다 표현식**
```JAVA
(String s) -> s.length() // return 생략으로 int return, String s 파람
(Apple a) -> a.getWeight() > 150
(int x, int y) -> {
  System.out.println("Result:");
  System.out.println(x+y);
}// void 리턴
() -> 43 // no 파람
(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight())
```
- (parameters) -> expression
- (parameters) -> { statements; }

**람다의 활용**
- 함수형 인터페이스에 사용(추상 메소드가 오직 하나인 인터페이스)
- 함수 디스크립터
  - 람다 표현식의 시그너처를 서울하는 메서드를 함수 디스크림터라고 부른다.
  - 시그너처를 활용해서 람다의 유효성 체크
```JAVA
(Apple, Apple) -> int 두개의 Apple 을 받아서 int 를 반환하는 함수
```
- 실행 어라운드 패턴(설정 -> 작업 -> 정리)

```JAVA
// String return 하고 BufferedReader 인자로 받는 시그니처
public interface BufferdReaderProcessor{
  String process(BufferedReader b) throws IOException;
}

public static String processFile(BufferdReaderProcessor p) throws IOException{
  try(BufferedReader br = new BuffedReader(new FileReader("data.txt"))){
    return p.process(br);
  }
}

String oneLine = processFile((BufferedReader br) -> br.readLine());
String twoLines = processFile((BufferedReader br) -> br.readLine() + br.readLine());
```

- 함수형 인터페이스 사용(java.util.function.\*)
  - Predicate<T>
  > (T) -> boolean
  - Consumer<T>
  > (T) -> void
  - Function<T, R>
  > (T) -> R
  - Supplier<T>
  > () -> T
  - UnaryOperator<T>
  > T -> T
  - BinaryOperator<T>
  > (T, T) -> T
  - BiPredicate<L, R>
  > (L, R) -> boolean
  - BiConsumer<T, U>
  > (T, U) -> void
  - BiFunction<T, U, R>
  > (T, U) -> R
  - 각각 기본형 특화 함수 존재(auto boxing 방지)

- 형식검사
- 같은 람다, 다른 함수형 인터페이스
- 형식추론

```JAVA
// a 의 형식 생략
List<Apple> greenApples = filter(inventory, a -> "green".equals(a.getColor()));
```
- 지역변수 사용 : final 로 선언되거나 final 처럼  취급
- 메서드 레퍼런스

```JAVA
inventory.sort(comparing(Apple::getWeight));
// 1.
(args) -> ClassName.staticMethod(args)
ClassName::staticMethod
//  2.
(args0, rest) -> arg0instaceMethod(rest)
ClassName::instanceMethod
// 3.
(args) -> expr.instanceMethod(args)
expr::instanceMethod

// 생성자
Supplier<Apple> c1 = Apple::new;
Apple a1 = c1.get();

Function<Integer, Apple> c2 = Apple::new;
Apple a2 = c2.apply(110);
```


[Send Mail](mailto:probyoo@gmail.com)
